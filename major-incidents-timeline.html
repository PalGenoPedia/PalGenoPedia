<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Major Incidents Timeline - Gaza Crisis Documentation</title>
    <meta name="description" content="Comprehensive timeline of historical massacres (1948-2023) and current genocide (2023-present) in Gaza and Palestine">

    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.Default.css" />

    <!-- Main Styles -->
    <link rel="stylesheet" href="shared-styles.css">

    <style>
        /* ===== DUAL TIMELINE SPECIFIC STYLES ===== */

        /* Timeline Mode Selector */
        .timeline-mode-selector {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .mode-selector-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .mode-selector-header h3 {
            color: var(--text-primary);
            font-size: 1.2rem;
            margin: 0;
        }

        .mode-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .mode-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition-base);
            text-align: center;
        }

        .mode-btn:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .mode-btn.active {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.05));
            box-shadow: var(--shadow-md);
        }

        .mode-btn.historical.active {
            border-color: #6c757d;
            background: linear-gradient(135deg, rgba(108, 117, 125, 0.1), rgba(108, 117, 125, 0.05));
        }

        .mode-btn.current.active {
            border-color: #dc3545;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.05));
        }

        .mode-btn.both.active {
            border-color: #0d6efd;
            background: linear-gradient(135deg, rgba(13, 110, 253, 0.1), rgba(13, 110, 253, 0.05));
        }

        .mode-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .mode-label {
            font-weight: 600;
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .mode-period {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .mode-stats {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-light);
        }

        .mode-stat {
            font-size: 0.8rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }

        .mode-stat strong {
            color: var(--accent-color);
            font-weight: 700;
        }

        /* Enhanced Filters */
        .advanced-filters {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .casualty-scale-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .scale-chip {
            background: var(--bg-tertiary);
            border: 2px solid transparent;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition-base);
            white-space: nowrap;
        }

        .scale-chip:hover {
            border-color: var(--secondary-color);
        }

        .scale-chip.active {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        /* Timeline Statistics Dashboard */
        .timeline-stats-dashboard {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            background: var(--surface-color);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition-base);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 0.25rem;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-sublabel {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* Period Comparison */
        .period-comparison {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .comparison-header {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .comparison-card {
            background: var(--bg-secondary);
            border-left: 4px solid var(--accent-color);
            padding: 1rem;
            border-radius: var(--border-radius-sm);
        }

        .comparison-card.historical {
            border-left-color: #6c757d;
        }

        .comparison-card.current {
            border-left-color: #dc3545;
        }

        .comparison-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .comparison-stats {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .comparison-stat {
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
        }

        .comparison-stat strong {
            color: var(--text-primary);
        }

        /* Event Type Legend */
        .event-type-legend {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .legend-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        /* Data Source Badge */
        .data-source-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(13, 110, 253, 0.1);
            color: #0d6efd;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(13, 110, 253, 0.3);
        }

        /* Loading States */
        .timeline-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid var(--border-color);
            border-top: 6px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-message {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .loading-detail {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .mode-buttons {
                grid-template-columns: 1fr;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="logo">
                <a href="index.html">Gaza Crisis Documentation</a>
            </h1>
            <nav class="nav">
                <!-- Main Navigation -->
                <a href="war-crimes-stats.html" class="nav-btn">⚖️ War Crimes</a>
                <a href="hunger-crisis-stats.html" class="nav-btn">🍽️ Hunger Crisis</a>
                <button class="nav-btn active">📋 Major Incidents</button>

                <!-- View Controls - Timeline is active by default -->
                <button class="nav-btn view-btn active" data-view="timeline">📅 Timeline</button>
                <button class="nav-btn view-btn" data-view="map">🗺️ Map</button>
                <button class="nav-btn view-btn" data-view="list">📋 List</button>
            </nav>
            <button class="theme-toggle" aria-label="Toggle theme">🌙</button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Page Header -->
        <div class="page-header">
            <div class="container">
                <div class="header-content">
                    <div class="header-text">
                        <h1>📋 Historical & Current Timeline</h1>
                        <p>Comprehensive documentation from 1948 Nakba through current genocide. Interactive timeline with verified sources from UN, Human Rights Watch, and other international organizations.</p>
                    </div>
                    <div class="header-stats" id="headerStats">
                        <div class="quick-stat">
                            <span class="stat-value" id="totalEvents">Loading...</span>
                            <span class="stat-label">Total Events</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-value" id="totalDeaths">Loading...</span>
                            <span class="stat-label">Total Deaths</span>
                        </div>
                        <div class="quick-stat">
                            <span class="stat-value" id="lastUpdate">Loading...</span>
                            <span class="stat-label">Last Updated</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Timeline Mode Selector -->
            <div class="timeline-mode-selector">
                <div class="mode-selector-header">
                    <h3>📊 Select Timeline Period</h3>
                    <span class="data-source-indicator">
                        🔍 Sources: UN, Human Rights Watch
                    </span>
                </div>
                <div class="mode-buttons">
                    <!-- Historical Mode - ACTIVE BY DEFAULT -->
                    <button class="mode-btn historical active" data-mode="historical">
                        <div class="mode-icon">📜</div>
                        <span class="mode-label">Historical Massacres</span>
                        <span class="mode-period">1948 - October 6, 2023</span>
                        <div class="mode-stats">
                            <div class="mode-stat">
                                <span>Events:</span>
                                <strong id="historicalCount">17</strong>
                            </div>
                            <div class="mode-stat">
                                <span>Deaths:</span>
                                <strong id="historicalDeaths">27K+</strong>
                            </div>
                        </div>
                    </button>

                    <!-- Current Mode -->
                    <button class="mode-btn current" data-mode="current">
                        <div class="mode-icon">🚨</div>
                        <span class="mode-label">Current Genocide</span>
                        <span class="mode-period">October 7, 2023 - Present</span>
                        <div class="mode-stats">
                            <div class="mode-stat">
                                <span>Events:</span>
                                <strong id="currentCount">10</strong>
                            </div>
                            <div class="mode-stat">
                                <span>Deaths:</span>
                                <strong id="currentDeaths">61K+</strong>
                            </div>
                        </div>
                    </button>

                    <!-- Both Mode -->
                    <button class="mode-btn both" data-mode="both">
                        <div class="mode-icon">📊</div>
                        <span class="mode-label">Complete Timeline</span>
                        <span class="mode-period">1948 - Present</span>
                        <div class="mode-stats">
                            <div class="mode-stat">
                                <span>Total Events:</span>
                                <strong id="bothCount">27</strong>
                            </div>
                            <div class="mode-stat">
                                <span>Total Deaths:</span>
                                <strong id="bothDeaths">88K+</strong>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Statistics Dashboard -->
            <div class="timeline-stats-dashboard" id="statsDashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">⚠️</div>
                        <div class="stat-number" id="massacresCount">0</div>
                        <div class="stat-label">Massacres</div>
                        <div class="stat-sublabel">Documented Events</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">💀</div>
                        <div class="stat-number" id="deathsCount">0</div>
                        <div class="stat-label">Total Deaths</div>
                        <div class="stat-sublabel">Verified Casualties</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🏥</div>
                        <div class="stat-number" id="injuredCount">0</div>
                        <div class="stat-label">Injured</div>
                        <div class="stat-sublabel">Documented Injuries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">🏠</div>
                        <div class="stat-number" id="displacedCount">0</div>
                        <div class="stat-label">Displaced</div>
                        <div class="stat-sublabel">Forced Displacement</div>
                    </div>
                </div>

                <!-- Period Comparison (shown in "both" mode) -->
                <div class="period-comparison" id="periodComparison" style="display: none;">
                    <div class="comparison-header">
                        📊 Historical vs Current Comparison
                    </div>
                    <div class="comparison-grid">
                        <div class="comparison-card historical">
                            <div class="comparison-title">📜 Historical Period (1948-2023)</div>
                            <div class="comparison-stats">
                                <div class="comparison-stat">
                                    <span>Duration:</span>
                                    <strong>75 years</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Major Events:</span>
                                    <strong id="compHistEvents">17</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Total Deaths:</span>
                                    <strong id="compHistDeaths">27,000+</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Avg Deaths/Year:</span>
                                    <strong id="compHistAvg">360</strong>
                                </div>
                            </div>
                        </div>
                        <div class="comparison-card current">
                            <div class="comparison-title">🚨 Current Genocide (Oct 2023-Present)</div>
                            <div class="comparison-stats">
                                <div class="comparison-stat">
                                    <span>Duration:</span>
                                    <strong id="genocideDuration">12 months</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Major Events:</span>
                                    <strong id="compCurrEvents">10</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Total Deaths:</span>
                                    <strong id="compCurrDeaths">61,200+</strong>
                                </div>
                                <div class="comparison-stat">
                                    <span>Avg Deaths/Day:</span>
                                    <strong id="compCurrAvg">167</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event Type Legend -->
            <div class="event-type-legend">
                <div class="legend-title">📌 Event Types</div>
                <div class="legend-items">
                    <div class="legend-item">
                        <span class="legend-color" style="background: #dc3545;"></span>
                        <span>Massacres</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #fd7e14;"></span>
                        <span>Military Operations</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #6f42c1;"></span>
                        <span>Forced Displacement</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #e83e8c;"></span>
                        <span>Hospital Attacks</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #6c757d;"></span>
                        <span>Starvation Warfare</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #0d6efd;"></span>
                        <span>Protest Suppression</span>
                    </div>
                </div>
            </div>

            <!-- Advanced Filters -->
            <div class="advanced-filters">
                <div class="filter-grid">
                    <!-- Date Range Filter -->
                    <div class="filter-group">
                        <label class="filter-label">
                            📅 Date Range
                        </label>
                        <select id="dateRangeFilter" class="filter-select">
                            <option value="">All Dates</option>
                            <option value="nakba">Nakba (1948)</option>
                            <option value="first_intifada">First Intifada (1987-1993)</option>
                            <option value="second_intifada">Second Intifada (2000-2005)</option>
                            <option value="gaza_operations">Gaza Operations (2008-2021)</option>
                            <option value="current_genocide">Current Genocide (2023-Present)</option>
                        </select>
                    </div>

                    <!-- Event Type Filter -->
                    <div class="filter-group">
                        <label class="filter-label">
                            🏷️ Event Type
                        </label>
                        <select id="eventTypeFilter" class="filter-select">
                            <option value="">All Types</option>
                            <option value="massacre">Massacres</option>
                            <option value="military_operation">Military Operations</option>
                            <option value="forced_displacement">Forced Displacement</option>
                            <option value="hospital_attack">Hospital Attacks</option>
                            <option value="protected_site_attack">Protected Site Attacks</option>
                            <option value="starvation_warfare">Starvation Warfare</option>
                            <option value="protest_suppression">Protest Suppression</option>
                        </select>
                    </div>

                    <!-- Search Filter -->
                    <div class="filter-group">
                        <label class="filter-label">
                            🔍 Search
                        </label>
                        <input type="text" id="searchFilter" class="search-input" placeholder="Search events, locations...">
                    </div>

                    <!-- Verification Status -->
                    <div class="filter-group">
                        <label class="filter-label">
                            ✅ Verification
                        </label>
                        <select id="verificationFilter" class="filter-select">
                            <option value="">All Statuses</option>
                            <option value="verified">Verified</option>
                            <option value="disputed">Disputed</option>
                            <option value="under_investigation">Under Investigation</option>
                        </select>
                    </div>
                </div>

                <!-- Casualty Scale Chips -->
                <div class="filter-group" style="margin-top: 1rem;">
                    <label class="filter-label">
                        📊 Casualty Scale
                    </label>
                    <div class="casualty-scale-filters">
                        <button class="scale-chip active" data-scale="all">All Scales</button>
                        <button class="scale-chip" data-scale="low">1-50 casualties</button>
                        <button class="scale-chip" data-scale="medium">51-500 casualties</button>
                        <button class="scale-chip" data-scale="high">501-2000 casualties</button>
                        <button class="scale-chip" data-scale="massive">2000+ casualties</button>
                    </div>
                </div>

                <div style="margin-top: 1rem; text-align: right;">
                    <button id="clearAllFilters" class="clear-btn">🔄 Clear All Filters</button>
                </div>
            </div>

            <!-- Loading Status -->
            <div id="timelineStatus" class="container" style="display: none;">
                <div class="csv-status" id="timelineStatusContent">
                    📊 Loading timeline data...
                </div>
            </div>
        </div>

        <!-- Timeline View - ACTIVE BY DEFAULT -->
        <section class="view-section active" id="timelineView">
            <div class="container">
                <div class="timeline-container">
                    <div id="timeline-embed" class="timeline">
                        <div class="timeline-loading">
                            <div class="loading-spinner"></div>
                            <div class="loading-message">Loading Historical Timeline...</div>
                            <div class="loading-detail">Fetching massacres data from 1948-2023...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Map View -->
        <section class="view-section" id="mapView">
            <div class="container">
                <div class="map-container">
                    <div id="map" class="map"></div>
                    <div class="map-legend">
                        <h4>Incident Types</h4>
                        <div class="legend-item"><span class="marker" style="background: #dc3545;"></span> Massacres</div>
                        <div class="legend-item"><span class="marker" style="background: #fd7e14;"></span> Military Operations</div>
                        <div class="legend-item"><span class="marker" style="background: #6f42c1;"></span> Forced Displacement</div>
                        <div class="legend-item"><span class="marker" style="background: #e83e8c;"></span> Hospital Attacks</div>
                        <div class="legend-item"><span class="marker" style="background: #6c757d;"></span> Starvation Warfare</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- List View -->
        <section class="view-section" id="listView">
            <div class="container">
                <div class="list-header">
                    <h2>Event Documentation</h2>
                    <div class="sort-controls">
                        <label for="sortSelect">Sort by:</label>
                        <select id="sortSelect" class="sort-select">
                            <option value="date-desc">Date (Newest First)</option>
                            <option value="date-asc">Date (Oldest First)</option>
                            <option value="deaths-desc">Deaths (Highest First)</option>
                            <option value="type">Event Type</option>
                            <option value="location">Location</option>
                        </select>
                    </div>
                </div>
                <div class="incident-grid" id="incidentGrid">
                    <!-- Events will be populated here -->
                </div>
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <span>Loading events...</span>
                </div>
                <div class="no-results" id="noResults" style="display: none;">
                    <div class="no-results-icon">🔍</div>
                    <h3>No events found</h3>
                    <p>Try adjusting your filters or search criteria.</p>
                    <button onclick="window.dualTimeline.clearAllFilters()" class="clear-all-btn">Clear All Filters</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Incident Detail Modal -->
    <div class="modal" id="incidentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Event Details</h2>
                <button class="modal-close" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="incident-details">
                    <div class="detail-section">
                        <h4>📋 Basic Information</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <strong>📅 Date:</strong> <span id="modalDate"></span>
                            </div>
                            <div class="detail-item">
                                <strong>📍 Location:</strong> <span id="modalLocation"></span>
                            </div>
                            <div class="detail-item">
                                <strong>🏷️ Event Type:</strong> <span id="modalType"></span>
                            </div>
                            <div class="detail-item">
                                <strong>✅ Verification:</strong> <span id="modalVerification"></span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h4>📄 Summary</h4>
                        <p id="modalSummary"></p>
                    </div>

                    <div class="detail-section" id="modalCasualtiesSection">
                        <h4>💥 Casualties & Impact</h4>
                        <div id="modalCasualties" class="casualties-display"></div>
                    </div>

                    <div class="detail-section" id="modalWarCrimesSection">
                        <h4>⚖️ War Crimes Documented</h4>
                        <div id="modalWarCrimes" class="war-crimes-list"></div>
                    </div>

                    <div class="detail-section">
                        <h4>📰 Verified Sources</h4>
                        <div id="modalSources" class="sources-container"></div>
                    </div>

                    <div class="detail-section">
                        <div class="modal-actions">
                            <a id="modalDetailPage" href="#" class="detail-page-btn" target="_blank">
                                📖 View Full Documentation →
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-placeholder"></div>
    <script>
        fetch('common-styles.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('footer-placeholder').innerHTML = html;
            });
    </script>

    <!-- External JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/leaflet.markercluster.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <!-- Custom Scripts - ONLY dual-timeline-manager.js (timeline.js removed) -->
    <script src="dual-timeline-manager.js"></script>
</body>
</html>
